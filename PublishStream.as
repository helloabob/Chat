package{	import flash.net.*;	import flash.events.*;	import flash.display.*;	import flash.media.*;	import fl.controls.*;	import flash.utils.setInterval;		public class PublishStream extends Sprite	{		private var video:Video;		private var nc:NetConnection;		private var ns:NetStream;		private var cam:Camera;		private var mic:Microphone;				private var txt:*;				public function PublishStream(btnPublish:*,txtInput:*):void		{			txt = txtInput;			//btnPublish.label="发布视频";			btnPublish.addEventListener(MouseEvent.CLICK,onPublishClick);			//获取视频和声音,并将视频显示到Flash界面			cam = Camera.getCamera();			cam.setMode(640,480,12);			mic = Microphone.getMicrophone();			mic.rate = 11;			video = new Video(640,480);			video.attachCamera(cam);			video.x=0;			video.y=0;			addChild(video);						setInterval(tt,1000);		}		private function tt():void{			trace("w:"+cam.width+"h:"+cam.height+"bw:"+cam.bandwidth);			trace("rate:"+mic.rate);		}				private function onPublishClick(evt:MouseEvent):void		{			nc = new NetConnection();			nc.connect("rtmp://115.29.165.209/live");			nc.addEventListener(NetStatusEvent.NET_STATUS,onNetStatusHandler);		}				private function onNetStatusHandler(evt:NetStatusEvent):void		{			trace(evt.info.code);			if(evt.info.code=="NetConnection.Connect.Success")			{				ns=new NetStream(nc);				ns.addEventListener(NetStatusEvent.NET_STATUS,onNetStatusHandler);				ns.client=new CustomClient();				ns.attachCamera(cam);				ns.attachAudio(mic);				ns.publish(txt.text,"live");			}		}	}}